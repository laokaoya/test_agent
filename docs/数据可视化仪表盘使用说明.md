# 📊 数据可视化仪表盘使用说明

## 🎯 功能概述

数据可视化仪表盘是一个实时监控和分析AI测试数据的可视化平台，帮助团队快速了解AI产品表现，识别问题和趋势。

---

## 🚀 快速开始

### 访问方式

**方式1：从主页跳转**
1. 打开测试平台首页：http://localhost:5000
2. 在左侧操作栏找到 **"📊 数据仪表盘"** 按钮
3. 点击即可在新窗口打开仪表盘

**方式2：直接访问**
- 直接在浏览器打开：http://localhost:5000/dashboard

---

## 📈 仪表盘功能详解

### 1️⃣ **概览统计卡片**（页面顶部）

显示四个核心指标：

| 指标 | 说明 | 图标颜色 |
|------|------|----------|
| **累计测试** | 系统启动以来的总测试次数 | 🔵 蓝色 |
| **今日测试** | 今天完成的测试次数 | 🟢 绿色 |
| **通过率** | 评分≥7.0的测试占比（%） | 🟡 黄色 |
| **平均评分** | 所有测试的加权平均分 | 🔴 红色 |

**用途：** 快速了解整体测试情况和AI表现。

---

### 2️⃣ **各角色表现对比**（左上图表）

**图表类型：** 柱状图

**展示内容：**
- X轴：5种角色类型（害羞型、话多型、好奇型、自信型、抗拒型）
- Y轴：评分（0-10分）
- 两组数据：
  - 🔵 **平均评分**：13项指标的加权平均分
  - 🟣 **体验评分**：角色体验评分（换算为10分制）

**hover提示信息：**
- 测试次数
- 通过率

**分析要点：**
```
✅ 期望：各角色评分差距 < 1.5分
⚠️ 警告：某角色明显低于其他角色
🚨 严重：害羞型或抗拒型评分 < 7.0
```

**使用场景：**
- 识别AI对哪类孩子的适配性较差
- 对比不同性格孩子的满意度
- 发现需要针对性优化的角色类型

---

### 3️⃣ **评分指标雷达图**（右上图表）

**图表类型：** 雷达图

**展示内容：**
- 13项评测指标的平均得分
- 范围：0-10分
- 形状越接近圆形越好

**各指标含义：**
- 互动吸引力（权重1.5）
- 鼓励开口能力（权重1.3）
- 提问引导能力（权重1.2）
- 情感支持表达（权重1.2）
- 教学效果（权重1.2）
- 话题连贯性（权重1.1）
- 年龄适配度（权重1.1）
- 词汇拓展引导、句式引导、回复丰富度等（权重1.0）
- 错误纠正技巧（权重0.9）

**分析要点：**
```
✅ 优秀：所有指标 ≥ 7.0，形状接近圆形
⚠️ 注意：某指标明显凹陷（< 6.0）
🚨 严重：互动吸引力 < 7.5 或 鼓励开口 < 7.0
```

**使用场景：**
- 一眼识别AI的优势和短板
- 找出需要优先改进的指标
- 对比优化前后的能力变化

---

### 4️⃣ **评分趋势分析**（中间大图）

**图表类型：** 折线图

**展示内容：**
- X轴：日期
- Y轴：评分（0-10分）
- 两条曲线：
  - 🔵 **平均评分**：每日平均加权评分
  - 🟣 **体验评分**：每日平均体验评分

**hover提示信息：**
- 当日测试次数
- 具体评分

**分析要点：**
```
✅ 理想：曲线平稳上升或保持高位
⚠️ 警告：曲线突然下降
🚨 严重：持续下降趋势
```

**使用场景：**
- 监控AI表现的时间趋势
- 验证产品迭代是否有效
- 识别评分异常波动的日期
- 对比不同时间段的表现

---

### 5️⃣ **各指标平均分**（左下图表）

**图表类型：** 横向柱状图

**展示内容：**
- 显示前10个评测指标
- 按平均分从高到低排序
- 颜色编码：
  - 🟢 绿色：≥ 8分（优秀）
  - 🟡 黄色：7-8分（良好）
  - 🔴 红色：< 7分（需改进）

**使用场景：**
- 快速识别表现最好和最差的指标
- 找出低于及格线（7.0）的指标
- 优先级排序改进任务

---

### 6️⃣ **最近测试记录**（右下表格）

**展示内容：**
- 最近10条测试记录
- 列信息：
  - **时间**：测试完成时间
  - **角色**：角色名称和类型
  - **评分**：加权平均分（X/10）
  - **体验**：体验评分（X/100）
  - **状态**：✓ 通过（≥7.0）或 ✗ 未通过（<7.0）

**颜色标识：**
- 🟢 通过：绿色徽章
- 🔴 未通过：红色徽章

**使用场景：**
- 查看最新的测试结果
- 快速发现失败的测试
- 追踪最近的测试活动

---

## 🔄 数据刷新

### 自动刷新
- 仪表盘每 **30秒** 自动刷新一次数据
- 无需手动操作

### 手动刷新
- 点击右下角的 **🔄 蓝色圆形按钮**
- 按钮会旋转并立即刷新所有数据

---

## 💡 使用技巧

### 1. **快速健康检查**

打开仪表盘后，按以下顺序检查：

```
步骤1：查看概览卡片
  ✅ 通过率 ≥ 80%？
  ✅ 平均评分 ≥ 7.0？

步骤2：查看角色对比图
  ✅ 害羞型和抗拒型评分 ≥ 7.0？
  ✅ 各角色评分差距 < 1.5？

步骤3：查看雷达图
  ✅ 互动吸引力 ≥ 7.5？
  ✅ 鼓励开口能力 ≥ 7.0？
  ✅ 无明显凹陷（< 6.0）的指标？

步骤4：查看趋势图
  ✅ 近期评分是否稳定或上升？

步骤5：查看最近测试
  ✅ 最近几次测试是否通过？
```

### 2. **发现问题的方法**

**场景A：通过率低（< 80%）**
```
1. 查看角色对比图 → 找出失败最多的角色
2. 查看指标雷达图 → 找出得分最低的指标
3. 查看最近测试表 → 确认最近哪些测试失败
4. 返回主页查看详细对话记录 → 分析具体问题
```

**场景B：某角色评分特别低**
```
1. 查看该角色的通过率和测试次数
2. 查看指标雷达图 → 哪些指标拖累了该角色
3. 针对该角色运行更多测试收集数据
4. 分析该角色的典型失败对话
```

**场景C：评分突然下降**
```
1. 查看趋势图 → 确定下降的日期
2. 对比下降前后的数据
3. 检查是否有AI版本更新
4. 回溯该日期的测试记录
```

### 3. **数据分析最佳实践**

**每日检查（早上）：**
- 查看今日测试数和通过率
- 查看最近测试记录
- 如有异常，深入分析

**每周回顾（周五）：**
- 查看本周趋势曲线
- 对比上周数据
- 总结改进效果
- 规划下周优化方向

**版本迭代前后：**
- 迭代前：记录当前各项指标
- 迭代后：运行足够测试（≥20轮）
- 对比前后数据验证改进效果
- 使用趋势图展示改进成果

---

## 📊 数据来源

仪表盘数据来自：
- **文件：** `test_results.json`
- **更新时机：** 每次测试完成并保存后
- **数据范围：** 自系统启动以来的所有测试记录

---

## 🎨 界面说明

### 颜色主题
- **背景：** 紫色渐变（667eea → 764ba2）
- **卡片：** 白色背景，圆角阴影
- **图表颜色：**
  - 主色调：蓝色（#667eea）
  - 副色调：紫色（#764ba2）
  - 成功：绿色（#28a745）
  - 警告：黄色（#ffc107）
  - 危险：红色（#dc3545）

### 响应式设计
- 支持桌面、平板、手机访问
- 图表自动适配屏幕大小
- 移动端优化布局

---

## 🔧 技术细节

### 前端技术栈
```
- Bootstrap 5.1.3 - UI框架
- Chart.js 3.9.1 - 图表库
- Font Awesome 6.0 - 图标库
- Vanilla JavaScript - 交互逻辑
```

### 后端API接口

| 接口 | 说明 | 返回数据 |
|------|------|----------|
| `/api/dashboard/summary` | 概览统计 | 累计测试、今日测试、通过率、平均分 |
| `/api/dashboard/role-stats` | 角色统计 | 各角色的测试次数、平均分、通过率 |
| `/api/dashboard/criteria-stats` | 指标统计 | 各指标的平均分和测试次数 |
| `/api/dashboard/trend` | 趋势数据 | 按日期的测试次数和平均分 |
| `/api/dashboard/recent-tests` | 最近测试 | 最近N条测试记录 |

### 数据更新流程
```
测试完成 → 保存到JSON → 仪表盘API读取 → 前端展示
```

---

## 🚨 常见问题

### Q1: 仪表盘显示"暂无数据"？
**A:** 需要先运行至少1次测试。返回主页点击"开始测试"。

### Q2: 数据没有更新？
**A:** 
1. 点击右下角刷新按钮手动刷新
2. 检查是否有新测试完成
3. 确认测试已成功保存（查看CSV或JSON文件）

### Q3: 图表显示不正确？
**A:**
1. 刷新页面（F5）
2. 清除浏览器缓存
3. 尝试其他浏览器

### Q4: 如何查看更详细的数据？
**A:** 
- 仪表盘提供概览，详细数据查看：
  - `test_results.json` - 完整结构化数据
  - `test_results.csv` - 表格数据（Excel可打开）
  - 返回主页查看具体对话记录

### Q5: 可以导出仪表盘数据吗？
**A:** 
- 数据存储在JSON和CSV文件中，可以直接导出
- 图表可以截图保存
- 后续版本将支持导出为PDF报告

---

## 📈 最佳实践

### 1. 建立测试基线
```
目标：了解AI的初始表现

步骤：
1. 运行50轮测试（每个角色10轮）
2. 记录各项指标的基线数据
3. 作为后续对比的参考
```

### 2. 持续监控
```
频率：每天

检查项：
✅ 通过率是否保持 ≥ 80%
✅ 是否有新的失败模式
✅ 评分是否有异常波动
```

### 3. 版本对比
```
每次迭代后：
1. 运行相同数量的测试（如20轮）
2. 对比迭代前后的数据
3. 验证改进假设
4. 决定是否发布
```

### 4. 定期回顾
```
每周/每月：
1. 导出数据进行深度分析
2. 生成趋势报告
3. 团队讨论改进方向
4. 制定下阶段目标
```

---

## 🎯 后续功能规划

计划增加的功能：

- [ ] **数据导出**：导出为Excel/PDF报告
- [ ] **自定义时间范围**：选择查看特定日期范围的数据
- [ ] **对比视图**：选择两个日期/版本进行对比
- [ ] **告警设置**：评分低于阈值时自动通知
- [ ] **问题案例**：直接从仪表盘跳转到问题对话
- [ ] **标注功能**：在仪表盘中标注重要事件（如版本发布）
- [ ] **实时更新**：使用WebSocket实现无刷新更新

---

## 📞 技术支持

如有问题或建议，请：
1. 查看本文档
2. 查看 `AI儿童英语陪伴产品评测体系.md`
3. 检查控制台错误信息
4. 联系开发团队

---

**祝使用愉快！📊✨**

