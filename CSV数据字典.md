# 📊 CSV 数据字典

## 🎯 概述

本文档详细说明了 `test_results.csv` 文件的列名结构和数据含义，方便进行数据分析和统计。

---

## 📋 列名结构

### 1️⃣ 基础信息（7列）

| 列名 | 数据类型 | 说明 | 用途 |
|------|---------|------|------|
| `测试ID` | String | 唯一标识符，格式：`时间戳_角色名` | 唯一标识每次测试，便于追溯和关联 |
| `测试时间` | DateTime | 完整时间戳，格式：`YYYY-MM-DD HH:MM:SS` | 记录测试的精确时间 |
| `测试日期` | Date | 测试日期，格式：`YYYY-MM-DD` | 按日期统计和筛选 |
| `角色名称` | String | 角色的名字（如：小熊、Yoyo） | 按角色分组统计 |
| `角色类型` | String | 角色类型（害羞型、话多型、好奇型、自信型、抗拒型） | 按类型分析AI表现 |
| `角色年龄` | Integer | 角色年龄（5-8岁） | 按年龄段分析 |
| `对话轮数` | Integer | 实际进行的对话轮数（通常为3轮） | 统计对话完整性 |

### 2️⃣ 对话内容（40列，每轮4列 × 10轮）

每轮对话包含4列：

| 列名格式 | 数据类型 | 说明 | 用途 |
|---------|---------|------|------|
| `R1_孩子消息` 至 `R10_孩子消息` | String | 孩子在该轮的消息内容 | 对话内容分析 |
| `R1_AI回复` 至 `R10_AI回复` | String | AI在该轮的回复内容 | AI回复质量分析 |
| `R1_字数_孩子` 至 `R10_字数_孩子` | Integer | 孩子消息的字符数 | 统计孩子活跃度 |
| `R1_字数_AI` 至 `R10_字数_AI` | Integer | AI回复的字符数 | 统计AI回复长度 |

> **注意：** R = Round（轮次），使用简洁的命名方便数据处理。未使用的轮次字段为空或0。

### 3️⃣ 评分数据（动态列数）

根据实际使用的评分标准，动态生成列：

| 列名格式 | 数据类型 | 说明 | 用途 |
|---------|---------|------|------|
| `评分_开口勇气` | Integer | "开口勇气"标准的得分（1-10分） | 单项指标分析 |
| `评分_主动表达` | Integer | "主动表达"标准的得分（1-10分） | 单项指标分析 |
| `评分_XXX` | Integer | 其他评分标准的得分 | 单项指标分析 |

> **注意：** 具体列名取决于用户选择的评分标准，每个标准独立成列，便于统计和对比。

### 4️⃣ 统计指标（5列）

| 列名 | 数据类型 | 说明 | 用途 |
|------|---------|------|------|
| `评分_平均分` | Float | 所有评分标准的平均值（保留2位小数） | 总体表现评估 |
| `评分_最高分` | Integer | 所有评分中的最高分 | 发现优势项 |
| `评分_最低分` | Integer | 所有评分中的最低分 | 发现薄弱项 |
| `评分_标准差` | Float | 评分的标准差（保留2位小数） | 评分一致性分析 |
| `使用的评分标准` | String | 本次测试使用的所有标准名称（逗号分隔） | 了解评分维度 |

> **标准差说明：** 
> - 标准差越小，表示各项评分越接近（表现均衡）
> - 标准差越大，表示各项评分差异越大（有明显强弱项）

### 5️⃣ 对话统计（4列）

| 列名 | 数据类型 | 说明 | 用途 |
|------|---------|------|------|
| `总字数_孩子` | Integer | 孩子所有消息的总字符数 | 评估孩子参与度 |
| `总字数_AI` | Integer | AI所有回复的总字符数 | 评估AI回复总量 |
| `平均字数_孩子` | Float | 孩子每轮平均字符数（保留1位小数） | 评估孩子表达积极性 |
| `平均字数_AI` | Float | AI每轮平均字符数（保留1位小数） | 评估AI回复长度 |

### 6️⃣ 评价内容（3列）

| 列名 | 数据类型 | 说明 | 用途 |
|------|---------|------|------|
| `评分理由_总体` | Text | Gemini生成的总体评价理由 | 质性分析 |
| `经验教训` | Text | Gemini生成的改进建议（结构化） | 改进方向分析 |
| `角色自述` | Text | 孩子角色的第一人称评价 | 用户体验分析 |

### 7️⃣ 元数据（2列）

| 列名 | 数据类型 | 说明 | 用途 |
|------|---------|------|------|
| `角色完整设定` | Text | 角色的完整traits（Markdown格式） | 追溯测试配置 |
| `开场白` | String | 角色的开场白 | 了解对话起点 |

---

## 📈 数据分析建议

### 常见分析场景

#### 1. **按角色类型分析**
```sql
SELECT 角色类型, AVG(评分_平均分) AS 平均得分
FROM test_results
GROUP BY 角色类型
ORDER BY 平均得分 DESC;
```
**用途：** 了解AI对不同类型孩子的适应能力

#### 2. **按日期趋势分析**
```sql
SELECT 测试日期, AVG(评分_平均分) AS 日平均分
FROM test_results
GROUP BY 测试日期
ORDER BY 测试日期;
```
**用途：** 观察AI表现的改善趋势

#### 3. **评分维度对比**
```sql
SELECT 
    AVG(评分_开口勇气) AS 开口勇气,
    AVG(评分_主动表达) AS 主动表达,
    AVG(评分_情绪回应) AS 情绪回应
FROM test_results;
```
**用途：** 发现AI的强项和弱项

#### 4. **对话长度分析**
```sql
SELECT 
    角色类型,
    AVG(平均字数_孩子) AS 孩子平均字数,
    AVG(平均字数_AI) AS AI平均字数
FROM test_results
GROUP BY 角色类型;
```
**用途：** 评估AI是否能引导孩子多说话

#### 5. **评分一致性分析**
```sql
SELECT 
    角色名称,
    评分_平均分,
    评分_标准差,
    CASE 
        WHEN 评分_标准差 < 1 THEN '表现均衡'
        WHEN 评分_标准差 < 2 THEN '略有差异'
        ELSE '差异明显'
    END AS 一致性评价
FROM test_results
ORDER BY 评分_标准差;
```
**用途：** 发现AI表现不均衡的案例

---

## 🔍 Excel/Power BI 使用技巧

### Excel 数据透视表

1. **按角色类型汇总**
   - 行：`角色类型`
   - 值：`评分_平均分`（平均值）
   - 筛选器：`测试日期`

2. **评分趋势图**
   - X轴：`测试日期`
   - Y轴：`评分_平均分`
   - 系列：`角色类型`

3. **对话量统计**
   - 使用柱状图对比 `平均字数_孩子` 和 `平均字数_AI`

### Power BI 仪表板建议

1. **总览卡片**
   - 总测试次数
   - 平均评分
   - 最佳角色类型

2. **时间趋势线图**
   - 按日期显示平均分变化

3. **评分雷达图**
   - 展示各评分维度的平均表现

4. **字数散点图**
   - X轴：孩子字数
   - Y轴：评分
   - 颜色：角色类型

---

## 📝 数据质量检查

### 必填字段
- `测试ID`
- `测试时间`
- `角色名称`
- `对话轮数`
- 至少一轮对话内容（`R1_孩子消息`, `R1_AI回复`）

### 数据范围
- `角色年龄`: 5-8
- `对话轮数`: 1-10
- `评分_*`: 1-10
- `评分_平均分`: 1.00-10.00
- `评分_标准差`: >= 0

### 异常值检测
- 对话轮数为0或空
- 所有评分都相同（可能是默认值）
- 字数为负数或异常大

---

## 💾 文件信息

- **文件名**: `test_results.csv`
- **编码**: UTF-8 with BOM（Excel兼容）
- **分隔符**: 逗号（`,`）
- **行结束符**: Windows (`\r\n`)
- **总列数**: ~70列（动态，取决于评分标准数量）

---

## 🔄 版本历史

| 版本 | 日期 | 变更说明 |
|------|------|---------|
| 2.0 | 2025-10-18 | 重大更新：优化列名设计，添加统计指标，展开评分维度 |
| 1.0 | 2025-10-17 | 初始版本：基础列名设计 |

---

## 📚 相关文档

- `preset_children.json` - 角色配置
- `preset_criteria.json` - 评分标准配置
- `如何添加内置角色.md` - 角色添加指南
- `如何添加内置评分标准.md` - 评分标准添加指南

---

**最后更新**: 2025-10-18  
**维护者**: AI Agent  
**文件位置**: `d:\test_agent\CSV数据字典.md`

